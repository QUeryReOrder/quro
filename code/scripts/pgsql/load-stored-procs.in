#!/bin/bash
#
# This file is released under the terms of the Artistic License.
# Please see the file LICENSE, included in this package, for details.
#
# Copyright (C) 2002-2006 Mark Wong & Open Source Development Labs, Inc.
#
# 2006 Rilson Nascimento

TOPDIR="@abs_top_srcdir@"
source ${TOPDIR}/scripts/dbt5_profile || exit 1

PGSQLDIR="${TOPDIR}/storedproc/pgsql/pgsql"

while getopts "p:" OPT; do
	case ${OPT} in
	p)
		PORT=${OPTARG}
		;;
	esac
done

PSQL="${PSQL} -p ${PORT} -e -d ${DBNAME}"

# Broker Volume transaction
${PSQL} -f ${PGSQLDIR}/BrokerVolume.sql || exit 1

# Customer Position transaction
${PSQL} -f ${PGSQLDIR}/CustomerPosition.sql || exit 1

# Data Maintenance transaction
${PSQL} -f ${PGSQLDIR}/DataMaintenance.sql || exit 1

# Market Feed transaction
${PSQL} -f ${PGSQLDIR}/MarketFeed.sql || exit 1

# Market Watch transaction
${PSQL} -f ${PGSQLDIR}/MarketWatch.sql || exit 1

# Security Detail transaction
${PSQL} -f ${PGSQLDIR}/SecurityDetail.sql || exit 1

# Trade Cleanup transaction
${PSQL} -f ${PGSQLDIR}/TradeCleanup.sql || exit 1

# Trade Lookup transaction
${PSQL} -f ${PGSQLDIR}/TradeLookup.sql || exit 1

# Trade Order transaction
${PSQL} -f ${PGSQLDIR}/TradeOrder.sql || exit 1

# Trade Result transaction
${PSQL} -f ${PGSQLDIR}/TradeResult.sql || exit 1

# Trade Status transaction
${PSQL} -f ${PGSQLDIR}/TradeStatus.sql || exit 1

# Trade Update transaction
${PSQL} -f ${PGSQLDIR}/TradeUpdate.sql || exit 1
