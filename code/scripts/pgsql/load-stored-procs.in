#!/bin/bash
#
# This file is released under the terms of the Artistic License.
# Please see the file LICENSE, included in this package, for details.
#
# Copyright (C) 2002-2006 Mark Wong & Open Source Development Labs, Inc.
#
# 2006 Rilson Nascimento

TOPDIR="@abs_top_srcdir@"
source ${TOPDIR}/scripts/dbt5_profile || exit 1

while getopts "p:" OPT; do
	case ${OPT} in
	p)
		PORT=${OPTARG}
		;;
	esac
done

# Broker Volume transaction
${PSQL} -p ${PORT} -e -d ${DBNAME} -f ${TOPDIR}/storedproc/pgsql/BrokerVolume.sql || exit 1

# Customer Position transaction
${PSQL} -p ${PORT} -e -d ${DBNAME} -f ${TOPDIR}/storedproc/pgsql/CustomerPosition.sql || exit 1

# Data Maintenance transaction
${PSQL} -p ${PORT} -e -d ${DBNAME} -f ${TOPDIR}/storedproc/pgsql/DataMaintenance.sql || exit 1

# Market Feed transaction
${PSQL} -p ${PORT} -e -d ${DBNAME} -f ${TOPDIR}/storedproc/pgsql/MarketFeed.sql || exit 1

# Market Watch transaction
${PSQL} -p ${PORT} -e -d ${DBNAME} -f ${TOPDIR}/storedproc/pgsql/MarketWatch.sql || exit 1

# Security Detail transaction
${PSQL} -p ${PORT} -e -d ${DBNAME} -f ${TOPDIR}/storedproc/pgsql/SecurityDetail.sql || exit 1

# Trade Cleanup transaction
${PSQL} -p ${PORT} -e -d ${DBNAME} -f ${TOPDIR}/storedproc/pgsql/TradeCleanup.sql || exit 1

# Trade Lookup transaction
${PSQL} -p ${PORT} -e -d ${DBNAME} -f ${TOPDIR}/storedproc/pgsql/TradeLookup.sql || exit 1

# Trade Order transaction
${PSQL} -p ${PORT} -e -d ${DBNAME} -f ${TOPDIR}/storedproc/pgsql/TradeOrder.sql || exit 1

# Trade Result transaction
${PSQL} -p ${PORT} -e -d ${DBNAME} -f ${TOPDIR}/storedproc/pgsql/TradeResult.sql || exit 1

# Trade Status transaction
${PSQL} -p ${PORT} -e -d ${DBNAME} -f ${TOPDIR}/storedproc/pgsql/TradeStatus.sql || exit 1

# Trade Update transaction
${PSQL} -p ${PORT} -e -d ${DBNAME} -f ${TOPDIR}/storedproc/pgsql/TradeUpdate.sql || exit 1
